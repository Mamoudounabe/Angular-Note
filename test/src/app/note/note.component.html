
<div class="notes-container">
  <div class="notes-sidebar">
    <h2>Mes Notes</h2>
    <div class="search-box">
      <input type="text" [(ngModel)]="searchQuery" 
             (input)="filterNotes()" 
             placeholder="Rechercher une note...">
    </div>
    <button class="new-note-btn" (click)="createNewNote()">+ Nouvelle Note</button>
    
    <ul class="notes-list">
      @if(noResultsFound) {
        <div class="no-results">
          <span class="no-results-icon">!</span>
          <p>Aucune note trouvée pour "{{searchQuery}}"</p>
        </div>
      }
      @for(note of filteredNotes; track note.id) {
        <li [class.active]="selectedNote?.id === note.id"
            [class.highlighted]="searchQuery && note.title.toLowerCase().includes(searchQuery.toLowerCase())"
            (click)="selectNote(note)">
          <div class="note-content">
            <span class="note-title">{{ note.title || 'Sans titre' }}</span>
            <span class="note-date">{{ note.updatedAt | date:'shortDate' }}</span>
          </div>
          <button class="delete-btn" (click)="deleteNote(note.id); $event.stopPropagation()" title="Supprimer">
            ×
          </button>
        </li>
      }
    </ul>
  </div>

  @if(selectedNote) {
    <div class="note-editor">
      <input [(ngModel)]="selectedNote.title" 
             placeholder="Titre de la note"
             class="note-title-input">
      
      <textarea [(ngModel)]="selectedNote.content"
                placeholder="Contenu de la note..."
                class="note-content-textarea"></textarea>
      
      <div class="note-tags">
        <h3>Tags :</h3>
        <div class="tags-container">
          @for(tag of tagService.getTags(); track tag.id) {
            <label class="tag-label">
              <input type="checkbox" 
                     [checked]="selectedNote.hasTag(tag.id)"
                     (change)="selectedNote.toggleTag(tag)">
              <span class="tag" [style.background-color]="tag.color">
                {{ tag.name }}
              </span>
            </label>
          }
        </div>
      </div>
      
      <div class="editor-actions">
        <button class="save-btn" (click)="saveNote()">Enregistrer</button>
        <button class="cancel-btn" (click)="selectedNote = null">Annuler</button>
      </div>
    </div>
  } @else {
    <div class="note-placeholder">
      <p>Sélectionnez une note ou créez-en une nouvelle</p>
    </div>
  }
</div>